<DOCTYPE HTML>
<html>
<head>
	<title>Tiny web app python source</title>
</head>

<body>
<pre><code>


#!/usr/bin/python

try:
	import cgi

	# Get the user input
	form = cgi.FieldStorage()

	# ***** SANITIZE USER INPUT HERE ****

	start_page = '''&lt;!DOCTYPE HTML&gt;
	&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;Room Finder Extraordinaire -- Start Page&lt;/title&gt;
	&lt;/head&gt;

	&lt;body&gt;
		&lt;h1&gt;Room Finder Extraordinaire&lt;/h1&gt;
		&lt;h2&gt;Which Room can I get?&lt;/h2&gt;
		&lt;form action=&quot;webapp.py&quot; method=&quot;get&quot;&gt;
			&lt;p&gt;Room Draw Number? &lt;input type=&quot;text&quot; name=&quot;draw_number&quot; /&gt;&lt;/p&gt;
			&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;FIND ME A ROOM!!&quot; /&gt;&lt;/p&gt;
		&lt;/form&gt;

		&lt;h2&gt;Can I get my dream room??&lt;/h2&gt;
		&lt;form action=&quot;webapp.py&quot; method=&quot;get&quot;&gt;
			&lt;p&gt;Room Draw Number? &lt;input type=&quot;text&quot; name=&quot;draw_number&quot;/&gt;&lt;/p&gt;
			&lt;p&gt;Hall or House Name?
				&lt;select name=&quot;dorms_houses&quot;&gt;
					&lt;option value=&quot;&quot;&gt;Select A Hall/House&lt;/option&gt;
					&lt;option value=&quot;burton&quot;&gt;Burton&lt;/option&gt;
					&lt;option value=&quot;cassat&quot;&gt;Cassat&lt;/option&gt;
					&lt;option value=&quot;davis&quot;&gt;Davis&lt;/option&gt;
					&lt;option value=&quot;evans&quot;&gt;Evans&lt;/option&gt;
					&lt;option value=&quot;goodhue&quot;&gt;Goodhue&lt;/option&gt;
					&lt;option value=&quot;james&quot;&gt;James&lt;/option&gt;
					&lt;option value=&quot;myers&quot;&gt;Myers&lt;/option&gt;
					&lt;option value=&quot;nourse&quot;&gt;Nourse&lt;/option&gt;
					&lt;option value=&quot;severance&quot;&gt;Severance&lt;/option&gt;
					&lt;option value=&quot;watson&quot;&gt;Watson&lt;/option&gt;
					&lt;option value=&quot;allen&quot;&gt;Allen&lt;/option&gt;
					&lt;option value=&quot;benton&quot;&gt;Benton&lt;/option&gt;
					&lt;option value=&quot;berg&quot;&gt;Berg&lt;/option&gt;
					&lt;option value=&quot;brooks&quot;&gt;Brooks&lt;/option&gt;
					&lt;option value=&quot;chaney&quot;&gt;Chaney&lt;/option&gt;
					&lt;option value=&quot;clader&quot;&gt;Clader&lt;/option&gt;
					&lt;option value=&quot;collier&quot;&gt;Collier&lt;/option&gt;
					&lt;option value=&quot;colwell&quot;&gt;Colwell&lt;/option&gt;
					&lt;option value=&quot;dacie_moses&quot;&gt;Dacie Moses&lt;/option&gt;
					&lt;option value=&quot;dixon&quot;&gt;Dixon&lt;/option&gt;
					&lt;option value=&quot;douglas&quot;&gt;Douglas&lt;/option&gt;
					&lt;option value=&quot;dow&quot;&gt;Dow&lt;/option&gt;
					&lt;option value=&quot;eugster&quot;&gt;Eugster&lt;/option&gt;
					&lt;option value=&quot;faculty_club&quot;&gt;Faculty Club&lt;/option&gt;
					&lt;option value=&quot;farm&quot;&gt;Farm&lt;/option&gt;
					&lt;option value=&quot;geffert&quot;&gt;Geffert&lt;/option&gt;
					&lt;option value=&quot;hall&quot;&gt;Hall&lt;/option&gt;
					&lt;option value=&quot;henrickson&quot;&gt;Henrickson&lt;/option&gt;
					&lt;option value=&quot;hill&quot;&gt;Hill&lt;/option&gt;
					&lt;option value=&quot;hunt_cottage&quot;&gt;Hunt Cottage &lt;/option&gt;
					&lt;option value=&quot;hunt&quot;&gt;Hunt&lt;/option&gt;
					&lt;option value=&quot;huntington&quot;&gt;Huntington&lt;/option&gt;
					&lt;option value=&quot;jewett&quot;&gt;Jewett&lt;/option&gt;
					&lt;option value=&quot;nason&quot;&gt;Nason&lt;/option&gt;
					&lt;option value=&quot;owens&quot;&gt;Owens&lt;/option&gt;
					&lt;option value=&quot;page&quot;&gt;Page&lt;/option&gt;
					&lt;option value=&quot;parish&quot;&gt;parish&lt;/option&gt;
					&lt;option value=&quot;parr&quot;&gt;Parr&lt;/option&gt;
					&lt;option value=&quot;prentice&quot;&gt;Prentice&lt;/option&gt;
					&lt;option value=&quot;rice&quot;&gt;Rice&lt;/option&gt;
					&lt;option value=&quot;scott&quot;&gt;Scott&lt;/option&gt;
					&lt;option value=&quot;stimson&quot;&gt;Stimson&lt;/option&gt;
					&lt;option value=&quot;williams&quot;&gt;Williams&lt;/option&gt;
					&lt;option value=&quot;wilson&quot;&gt;Wilson&lt;/option&gt;
				&lt;/select&gt;
			&lt;/p&gt;
			&lt;p&gt;Number of Desired Room? &lt;input type=&quot;text&quot; name=&quot;room_number&quot; /&gt;&lt;/p&gt;
			&lt;p&gt;Desired Occupancy? &lt;input type=&quot;radio&quot; name=&quot;capacity&quot; value&quot;single&quot;&gt; Single
				&lt;input type=&quot;radio&quot; name=&quot;capacity&quot; value&quot;double&quot;&gt; Double
				&lt;input type=&quot;radio&quot; name=&quot;capacity&quot; value&quot;triple&quot;&gt; Triple
				&lt;input type=&quot;radio&quot; name=&quot;capacity&quot; value&quot;quad_plus&quot;&gt; Quad+&lt;/p&gt;
			&lt;p&gt;Desired Environment? &lt;input type=&quot;radio&quot; name=&quot;environment&quot; value&quot;subfree&quot;&gt; Sub-Free
			   &lt;input type=&quot;radio&quot; name=&quot;environment&quot; value&quot;quiet&quot;&gt; Quiet
			   &lt;input type=&quot;radio&quot; name=&quot;environment&quot; value&quot;single_gender&quot;&gt; Single Gender
			   &lt;input type=&quot;radio&quot; name=&quot;environment&quot; value&quot;interest_house&quot;&gt; Interest House
			&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;FIND ME A ROOM!!&quot; /&gt;&lt;/p&gt;

		&lt;h2&gt;What's the best room I can find near my favorite location on campus?&lt;/h2&gt;
		&lt;form action=&quot;webapp.py&quot; method=&quot;get&quot;&gt;
			&lt;p&gt;Room Draw Number? &lt;input type=&quot;text&quot; name=&quot;draw_number&quot; /&gt;&lt;/p&gt;
			&lt;p&gt;Favorite Location?
				&lt;select name=&quot;fav_locations&quot;&gt;
					&lt;option value=&quot;&quot;&gt;Select A Location&lt;/option&gt;
					&lt;option value=&quot;sayles&quot;&gt;Sayles&lt;/option&gt;
					&lt;option value=&quot;willis&quot;&gt;Willis&lt;/option&gt;
					&lt;option value=&quot;hulings&quot;&gt;Hulings&lt;/option&gt;
					&lt;option value=&quot;olin&quot;&gt;Olin&lt;/option&gt;
					&lt;option value=&quot;mudd&quot;&gt;Mudd&lt;/option&gt;
					&lt;option value=&quot;cmc&quot;&gt;CMC&lt;/option&gt;
					&lt;option value=&quot;boliou&quot;&gt;Boliou&lt;/option&gt;
					&lt;option value=&quot;laird&quot;&gt;Laird&lt;/option&gt;
					&lt;option value=&quot;gould&quot;&gt;Gould&lt;/option&gt;
					&lt;option value=&quot;leighton&quot;&gt;Leighton&lt;/option&gt;
					&lt;option value=&quot;west_athletic_complex&quot;&gt;West Athletic Complex&lt;/option&gt;
					&lt;option value=&quot;recreation_center&quot;&gt;Recreation Center&lt;/option&gt;
					&lt;option value=&quot;downtown_northfield&quot;&gt;Downtown Northfield&lt;/option&gt;
					&lt;option value=&quot;st_olaf&quot;&gt;St Olaf&lt;/option&gt;
					&lt;option value=&quot;bald_spot&quot;&gt;Bald Spot&lt;/option&gt;
					&lt;option value=&quot;weitz&quot;&gt;Weitz&lt;/option&gt;
					&lt;option value=&quot;mini_bald_spot&quot;&gt;Mini Bald Spot&lt;/option&gt;
					&lt;option value=&quot;upper_arb&quot;&gt;Upper Arb&lt;/option&gt;
					&lt;option value=&quot;lower_arb&quot;&gt;Lower Arb&lt;/option&gt;
					&lt;option value=&quot;cowling&quot;&gt;Cowling&lt;/option&gt;
					&lt;option value=&quot;bell_field&quot;&gt;Bell Field&lt;/option&gt;
					&lt;option value=&quot;ldc&quot;&gt;LDC&lt;/option&gt;
					&lt;option value=&quot;goodsell&quot;&gt;Goodsell&lt;/option&gt;
					&lt;option value=&quot;concert_hall&quot;&gt;Concert Hall&lt;/option&gt;
					&lt;option value=&quot;music_hall&quot;&gt;Music Hall&lt;/option&gt;
					&lt;option value=&quot;scoville&quot;&gt;Scoville&lt;/option&gt;
					&lt;option value=&quot;facilities&quot;&gt;Facilities&lt;/option&gt;
					&lt;option value=&quot;tunnels&quot;&gt;Tunnels&lt;/option&gt;
				&lt;/select&gt;
			&lt;/p&gt;
			&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;FIND ME A ROOM!!&quot; /&gt;&lt;/p&gt;
		&lt;/form&gt;

		&lt;h2&gt;How can I avoid my mortal enemy?&lt;/h2&gt;
		&lt;form action=&quot;webapp.py&quot; method=&quot;get&quot;&gt;
			&lt;p&gt;YOUR Room Draw Number? &lt;input type=&quot;text&quot; name=&quot;my_draw_number&quot; /&gt;&lt;/p&gt;
			&lt;p&gt;ENEMY'S Room Draw Number? &lt;input type=&quot;text&quot; name=&quot;enemy_draw_number&quot; /&gt;&lt;/p&gt;
			&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;FIND ME A ROOM!!&quot; /&gt;&lt;/p&gt;
		&lt;/form&gt;

	&lt;/body&gt;
	&lt;/html&gt;
	'''

	print &quot;Content-type: text/html\r\n\r\n&quot;

	if 'animal' in form and 'badanimal' in form:
		animal = form['animal'].value
		badAnimal = form['badanimal'].value

		lol_page = '''&lt;DOCTYPE HTML&gt;
		&lt;html&gt;
		&lt;head&gt;
			&lt;title&gt;Tiny web app results&lt;/title&gt;
		&lt;/head&gt;

		&lt;body&gt;
			&lt;p&gt;I like %ss, too.&lt;/p&gt;
			&lt;p&gt;Also, %ss are gross.&lt;/p&gt;
		&lt;/body&gt;
		&lt;/html&gt;''' % (animal, badAnimal)

		print lol_page
	else:
		print start_page
except Exception, err:
	print err
	print traceback.format_exc()


</code></pre>
</body>
</html>
